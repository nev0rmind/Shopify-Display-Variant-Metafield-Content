
<script id="variant_metafield_data" type="application/json">
  {
  {% for variant in product.variants %}
    {% assign metafield_content = variant.metafields.custom.technical_size_detailed %}
    "{{ variant.id }}": "{{ metafield_content }}" {% unless forloop.last %}, {% endunless %}
  {% endfor %}  
  }
</script>

<script>
  document.addEventListener('variant:change', function(evt) {
  
    //load metafield data
    const allVariantMetafieldData = JSON.parse(document.querySelector('#variant_metafield_data').textContent)
    console.log(allVariantMetafieldData)
  
    const variantDetailsTechnics = document.querySelector('#variantTechnics');
  
    if (evt.detail.variant) {
      variantDetailsTechnics.innerHTML = allVariantMetafieldData[evt.detail.variant.id]
    } 
  });
</script>
